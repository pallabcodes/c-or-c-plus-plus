# AuroraDB Production Configuration
# This configuration is optimized for production deployments

[database]
# Maximum concurrent connections
max_connections = 1000
# Buffer pool size in bytes (1GB)
buffer_pool_size = 1073741824
# Maximum tables per database
max_tables = 10000
# Maximum columns per table
max_columns_per_table = 1000
# Default isolation level
default_isolation_level = "read_committed"
# Transaction timeout in milliseconds
transaction_timeout_ms = 300000
# Query cache size in MB
query_cache_size_mb = 512
# Enable query logging
enable_query_logging = true
# Enable metrics collection
enable_metrics = true
# Database data directory
data_directory = "/var/lib/aurora/data"
# Database temp directory
temp_directory = "/tmp/aurora"

[server]
# PostgreSQL wire protocol port
postgresql_port = 5433
# HTTP API port
http_port = 8080
# Binary protocol port
binary_port = 9090
# Bind address
bind_address = "0.0.0.0"
# Server hostname
hostname = "aurora-db"
# Maximum request size in MB
max_request_size_mb = 10
# Request timeout in seconds
request_timeout_seconds = 30
# Enable graceful shutdown
enable_graceful_shutdown = true
# Graceful shutdown timeout in seconds
shutdown_timeout_seconds = 30

[storage]
# Storage engine selection strategy
selection_strategy = "workload_based"
# B+ Tree configuration
[storage.btree]
page_size_kb = 8
max_table_size_mb = 10240
cache_size_mb = 2048
max_concurrent_transactions = 200
# LSM Tree configuration
[storage.lsm]
memtable_size_mb = 128
sstable_size_mb = 512
compaction_threads = 4
bloom_filter_bits = 10
# Hybrid configuration
[storage.hybrid]
adaptive_threshold = 10000
vector_threshold = 0.1
# WAL configuration
[storage.wal]
directory = "/var/lib/aurora/wal"
segment_size_mb = 64
max_segments = 100
sync_strategy = "fsync"
flush_interval_ms = 1000
# Compression configuration
[storage.compression]
algorithm = "lz4"
level = 1
min_block_size = 65536

[network]
# Connection pool configuration
[network.connection_pool]
max_connections = 1000
min_idle = 10
max_idle_time_seconds = 300
connection_timeout_seconds = 30
health_check_interval_seconds = 60
# TLS configuration
[network.tls]
enabled = true
cert_file = "/etc/aurora/ssl/server.crt"
key_file = "/etc/aurora/ssl/server.key"
ca_file = "/etc/aurora/ssl/ca.crt"
min_version = "TLS1.2"
mutual_auth = false
# Load balancer configuration
[network.load_balancer]
enabled = false
algorithm = "round_robin"
health_check_interval_seconds = 30
failover_timeout_seconds = 30

[security]
# Enable authentication
enable_authentication = true
# Enable authorization
enable_authorization = true
# Password minimum length
password_min_length = 12
# Session timeout in minutes
session_timeout_minutes = 60
# Enable row-level security
enable_row_level_security = false
# Encryption at rest
encryption_at_rest = false
# Encryption key file
encryption_key_file = "/etc/aurora/keys/master.key"

[logging]
# Log level (error, warn, info, debug, trace)
level = "info"
# Log format (json, text, compact)
format = "json"
# Log file path
file = "/var/log/aurora/aurora.log"
# Maximum log file size in MB
max_size_mb = 100
# Maximum number of log files
max_files = 10
# Enable log compression
compress_rotated = true
# Slow query threshold in milliseconds
slow_query_threshold_ms = 1000

[monitoring]
# Enable Prometheus metrics
enable_prometheus = true
# Prometheus metrics port
prometheus_port = 9091
# Metrics collection interval in seconds
collection_interval_seconds = 15
# Enable health checks
enable_health_checks = true
# Health check port
health_check_port = 8081
# Alert thresholds
[monitoring.alert_thresholds]
cpu_high_threshold = 80
memory_high_threshold = 85
disk_high_threshold = 90
connection_pool_high_threshold = 95
slow_query_threshold_ms = 5000

[transaction]
# Maximum concurrent transactions
max_concurrent_transactions = 200
# Deadlock detection interval in milliseconds
deadlock_detection_interval_ms = 100
# Transaction timeout in milliseconds
transaction_timeout_ms = 300000
# Isolation level
isolation_level = "read_committed"
# Enable distributed transactions
enable_distributed_transactions = false
# Transaction log directory
log_directory = "/var/lib/aurora/tx_logs"

[vector]
# Default vector dimension
default_dimension = 384
# Index type (hnsw, ivf, flat)
index_type = "hnsw"
# Maximum connections per layer (HNSW)
max_connections = 32
# Construction search parameter (HNSW)
ef_construction = 200
# Query search parameter (HNSW)
ef_search = 64
# Enable GPU acceleration
enable_gpu = false
# Vector cache size in MB
cache_size_mb = 1024

[audit]
# Enable audit logging
enable_audit_logging = true
# Audit log file path
audit_log_file = "/var/log/aurora/audit.log"
# Log sensitive operations
log_sensitive_operations = true
# Log connection events
log_connection_events = true
# Log DDL operations
log_ddl_operations = true
# Log DML operations
log_dml_operations = false
# Sample rate for DML operations (0.0 to 1.0)
dml_sample_rate = 0.1
# Retention period in days
retention_days = 365
# Maximum audit log size in MB
max_log_size_mb = 1024