# Networking Protocols Standards

## Scope
Applies to all networking code including wire protocols, connection pooling, and query routing. Extends repository root rules.

## Wire Protocols

### PostgreSQL Protocol
* Frontend/Backend protocol
* Binary and text formats
* Extended query protocol
* Protocol version 3.0
* Copy protocol for bulk operations

### MySQL Protocol
* Client/Server protocol
* Binary protocol for prepared statements
* Text protocol for simple queries
* Protocol version 10
* Binary log protocol

### Custom Binary Protocols
* Efficient binary encoding
* Protocol versioning
* Backward compatibility
* Compression support

## Connection Management

### Connection Pooling
* Pool of persistent connections
* Connection reuse
* Idle connection timeout
* Maximum connection limits

### Connection Lifecycle
* Connection establishment
* Authentication and authorization
* Connection state management
* Graceful connection closure

### Connection Routing
* Route connections to appropriate nodes
* Load balancing
* Failover handling
* Geographic routing

## Query Routing

### Query Distribution
* Route queries to correct shards
* Cross shard query coordination
* Query aggregation
* Result merging

### Load Balancing
* Round robin distribution
* Least connections
* Weighted distribution
* Health check based routing

## Implementation Requirements
* Proper error handling
* Connection timeouts
* Resource limits
* Graceful degradation
* Security considerations

## Performance Considerations
* Minimize protocol overhead
* Efficient serialization
* Connection pooling effectiveness
* Network latency optimization
* Batch operations support

